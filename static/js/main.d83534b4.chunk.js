(this.webpackJsonpbunkalog=this.webpackJsonpbunkalog||[]).push([[0],{100:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s.n(a),o=s(26),c=s.n(o),l=(s(63),s(12)),i=s(13),r=s(15),u=s(14),d=(s(64),s(36),s(55)),h=s(24),j={PROXY_URL:"https://bunkalog-backend.herokuapp.com"},b=s(16),g=s.n(b),O=s(17),C=s.n(O),x=s(101),f=s(102),m=s(103),v=s(104),p=s(56),k=s(3),L=function(e){Object(r.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={courseName:"",courseCode:"",classesAttended:0,totalClasses:0},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(i.a)(s,[{key:"handleChange",value:function(e){var t=e.target.name,s=e.target.value;this.setState(Object(d.a)({},t,s))}},{key:"handleSubmit",value:function(e){var t={method:"POST",headers:{bunkalog_session_id:C.a.get("bunkalog_session_id")},url:j.PROXY_URL+"/add-class",data:this.state};g()(t).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),e.preventDefault()}},{key:"render",value:function(){return Object(k.jsxs)(x.a,{onSubmit:this.handleSubmit,children:[Object(k.jsxs)(f.a,{children:[Object(k.jsx)(m.a,{for:"courseName",children:"Course Name"}),Object(k.jsx)(v.a,{type:"text",name:"courseName",value:this.state.courseName,id:"courseName",onChange:this.handleChange})]}),Object(k.jsxs)(f.a,{children:[Object(k.jsx)(m.a,{for:"courseCode",children:"Course Code"}),Object(k.jsx)(v.a,{type:"text",name:"courseCode",value:this.state.courseCode,id:"courseCode",onChange:this.handleChange})]}),Object(k.jsxs)(f.a,{children:[Object(k.jsx)(m.a,{for:"classesAttended",children:"Classes Attended"}),Object(k.jsx)(v.a,{type:"number",name:"classesAttended",value:this.state.classesAttended,id:"classesAttended",onChange:this.handleChange})]}),Object(k.jsxs)(f.a,{children:[Object(k.jsx)(m.a,{for:"totalClasses",children:"Total Classes"}),Object(k.jsx)(v.a,{type:"number",name:"totalClasses",value:this.state.totalClasses,id:"totalClasses",onChange:this.handleChange})]}),Object(k.jsx)(p.a,{type:"Submit",children:"Add Class"})]})}}]),s}(n.a.Component),S=s(27),_=s(105),y=s(106),N=s(107),A=s(108),I=s(117),R=s(118),U=s(119),P=function(e){Object(r.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={onLogout:!1},e.onLogout&&(a.state.onLogout=e.onLogout),a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{children:Object(k.jsxs)(_.a,{color:"light",light:!0,expand:"md",children:[Object(k.jsx)(y.a,{href:"/",children:"bunkalog"}),Object(k.jsxs)(N.a,{children:[Object(k.jsx)(A.a,{children:Object(k.jsxs)(I.a,{nav:!0,inNavbar:!0,children:[Object(k.jsx)(R.a,{nav:!0,caret:!0,children:"Add Class"}),Object(k.jsx)(U.a,{right:!0,children:Object(k.jsx)(L,{})})]})}),Object(k.jsx)(A.a,{children:Object(k.jsx)(S.GoogleLogout,{clientId:"724928841047-qeoov5rpo41njs7e09moms868eknu2fp.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){return e.state.onLogout()}})})]})]})})}}]),s}(n.a.Component),T=s(109),X=s(110),Y=s(111),F=s(112),B=s(113),D=s(114),J=s(115),q=s(116),w=function(e){Object(r.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={courseName:e.courseName,courseCode:e.courseCode,attendClass:e.classesAttended,totalClasses:e.totalClasses},a}return Object(i.a)(s,[{key:"attendClass",value:function(){var e=this,t={method:"POST",headers:{bunkalog_session_id:C.a.get("bunkalog_session_id")},url:j.PROXY_URL+"/attend-class",data:{courseCode:this.state.courseCode}};g()(t).then((function(t){g.a.get(j.PROXY_URL+"/user/course",{params:{session_id:C.a.get("bunkalog_session_id"),courseCode:e.state.courseCode}}).then((function(t){var s=t.data;e.setState({attendClass:s.classesAttended,totalClasses:s.totalClasses})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"bunkClass",value:function(){var e=this,t={method:"POST",headers:{bunkalog_session_id:C.a.get("bunkalog_session_id")},url:j.PROXY_URL+"/bunk-class",data:{courseCode:this.state.courseCode}};g()(t).then((function(t){g.a.get(j.PROXY_URL+"/user/course",{params:{session_id:C.a.get("bunkalog_session_id"),courseCode:e.state.courseCode}}).then((function(t){var s=t.data;e.setState({attendClass:s.classesAttended,totalClasses:s.totalClasses})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{children:Object(k.jsxs)(T.a,{children:[Object(k.jsxs)(X.a,{children:[Object(k.jsx)(Y.a,{tag:"h5",children:this.state.courseName}),Object(k.jsx)(F.a,{tag:"h6",className:"mb-2 text-muted",children:this.state.courseCode}),Object(k.jsxs)(B.a,{children:["Attended ",this.state.attendClass," out of ",this.state.totalClasses," classes"]})]}),Object(k.jsx)(X.a,{children:Object(k.jsxs)(D.a,{multi:!0,children:[Object(k.jsx)(D.a,{bar:!0,value:this.state.attendClass,max:this.state.totalClasses}),Object(k.jsx)(D.a,{bar:!0,value:this.state.totalClasses-this.state.attendClass,color:"danger",max:this.state.totalClasses})]})}),Object(k.jsx)(X.a,{children:Object(k.jsxs)(J.a,{children:[Object(k.jsx)(q.a,{children:Object(k.jsx)(p.a,{onClick:function(){return e.attendClass()},children:"Attend Next Class"})}),Object(k.jsx)(q.a,{children:Object(k.jsx)(p.a,{onClick:function(){return e.bunkClass()},children:"Bunk Next Class"})}),Object(k.jsx)(q.a,{children:Object(k.jsx)(p.a,{children:"Class Cancelled"})})]})})]})})}}]),s}(n.a.Component),G=function(e){Object(r.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={onLoginSuccess:e.onLoginSuccess},a}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{children:[Object(k.jsx)(_.a,{color:"light",light:!0,expand:"md",children:Object(k.jsx)(y.a,{href:"/",children:"bunkalog"})}),Object(k.jsx)(S.GoogleLogin,{clientId:"724928841047-qeoov5rpo41njs7e09moms868eknu2fp.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(t){e.state.onLoginSuccess(t)}})]})}}]),s}(n.a.Component),M=function(e){Object(r.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={data:{data:[]},isUserLoggedIn:JSON.parse(localStorage.getItem("isUserLoggedIn"))||!1},a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=this;g.a.get(j.PROXY_URL+"/user",{params:{session_id:C.a.get("bunkalog_session_id")}}).then((function(t){e.setState({data:t})})).catch((function(e){console.log(e)}))}},{key:"loginSucceed",value:function(e){console.log(e);var t={method:"POST",headers:{"Content-Type":"application/json"},url:j.PROXY_URL+"/login",data:{response:e}};g()(t).then((function(e){var t=e.data;console.log(t),C.a.set("bunkalog_session_id",t)})).catch((function(e){console.log(e)})),this.setState({isUserLoggedIn:!0}),localStorage.setItem("isUserLoggedIn",!0)}},{key:"logoutSucceed",value:function(){this.setState({isUserLoggedIn:!1}),localStorage.setItem("isUserLoggedIn",!1)}},{key:"onLoggedIn",value:function(){var e=this,t=this.state.data.data.map((function(e,t){return Object(k.jsx)(q.a,{children:Object(k.jsx)(w,{courseName:e.courseName,courseCode:e.courseCode,classesAttended:e.classesAttended,totalClasses:e.totalClasses})})}));return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(P,{onLogout:function(){return e.logoutSucceed()}}),Object(k.jsx)(J.a,{sm:"3",children:t})]})}},{key:"onLoggedOut",value:function(){var e=this;return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(G,{onLoginSuccess:function(t){return e.loginSucceed(t)}})})}},{key:"render",value:function(){return this.state.isUserLoggedIn?this.onLoggedIn():this.onLoggedOut()}}]),s}(n.a.Component),E=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,120)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),o(e),c(e)}))};c.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(M,{})}),document.getElementById("root")),E()},63:function(e,t,s){},64:function(e,t,s){}},[[100,1,2]]]);
//# sourceMappingURL=main.d83534b4.chunk.js.map